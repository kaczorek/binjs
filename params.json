{"tagline":"#!/bin/js is a scripting framework using the best of bash and JavaScript","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Binjs","google":"","body":"/bin/js scripts are a mash-up of JavaScript and bash.\r\n\r\nSimple bash code is valid\r\n\r\n    #!/bin/js\r\n    #\r\n    #  My first /bin/js script\r\n    #\r\n\r\n    echo Hello World\r\n\r\nSimple JavaScript code is valid.\r\n\r\n    #!/bin/js\r\n    //\r\n    // If you prefer use JS style comments\r\n    //\r\n\r\n    for (var i = 0 ; i < 23 ; i++) {\r\n\r\n        $.print(\"Hello World\");\r\n\r\n    }\r\n\r\nAnd you can mash-up both.\r\n\r\n    #!/bin/js\r\n    /**\r\n     * Another comment style\r\n     */\r\n\r\n    for (var i = 0 ; i < 23 ; i++) {\r\n\r\n        echo Hello World\r\n\r\n    }\r\n\r\nPipes and redirects and all the wonders of bash one-liners are available.\r\n\r\n    #!/bin/js\r\n\r\n    cat \"${HOME}/apache.log\" | tail -20 | awk ' {print $7}' | tee.tail.log\r\n\r\nAll the beauty(ehem) of C style syntax from JavaScript is available.\r\n\r\n    #!/bin/js\r\n\t\r\n    ...\r\n  \r\n    switch (errno) {\r\n\r\n        case 1 : {\r\n            doThing();\r\n            break;\r\n        case 2 :\r\n            echo found a wrongun >> errs.log\r\n            break;\r\n        default :\r\n            $.error(10, \"Unknown option\");\r\n    }    \r\n\r\nswitch statements, if/else, while loops, do/while loops, try/catch/finally and others from JavaScript are used, since the bash ones are really ugly.  \r\n\r\nThe pipes and redirects and even the trailing & from bash are used.\r\n\r\n## Simple Usage\r\n\r\n/bin/js syntax should be pretty straight forward if you write JavaScript and are used to working with Linux. The goal is that syntax should be completely natural for developers who are comfortable with C style languages such as JavaScript, C, C++, C# or Java, and work on the bash command line.\r\n\r\nThe general rule with /bin/js syntax is that each line of the file is interpreted as either JavaScript OR a SINGLE line of bash, but not both.\r\n\r\nThus you can not write\r\n\r\n    if (true) echo Hello World\r\n\r\nYou have to write the statements on separate line\r\n\r\n    if (true) {\r\n        echo Hello World\r\n    }\r\n\r\n\r\nVar statements and functions must be written on a single line, and var is required in /bin/js scripts.\r\n\r\n    var myVal = new Object();\r\n\r\n    function myFunc() {\r\n\r\n        echo Hello World\r\n\r\n    }\r\n\r\nVariables defined this way with `function` or `var` are then known to the parser and can be called as JavaScript.\r\n\r\n    myVal.attribute = 23;\r\n    myFunc();\r\n\r\nGlobal vars are NOT supported\r\n\r\n    globalVar = 23;  // wrong, missing vars\r\n\r\nMutli-line vars are NOT supported\r\n\r\n    var i,j,k;       // wrong only i is known\r\n\r\nIn short, if you don't create a var or a function with the `var` and `function` statements at the start of the line the preparser will not treat them as JavaScript.\r\n\r\n    if (true) var funk = function() {return true;}\r\n\r\n    funk(); // wrong, parse does not know about \"funk\" so it is interpreted as bash\r\n\r\nJust remember, each line is interpreted as EITHER JavaScript OR bash by a preparser which sends the lines to the correct interpreter.  The preparser never compiles the code, it just peaks at the front of the line to see weather v8 or bash should compile it.\r\n\r\nThe net result of this is a very comfortable way to write scripts, the final code is self-explanatory and  natural, you can increment a variable in a script with `i++` instead of `i=$((i + 1))`.  The code you write looks like code, and the lines of bash commands look exactly like you would type them on the command line.\r\n\r\nIf you know how to write a bit of JavaScript and have minimal bash skills you already know how to write /bin/js scripts. Just Add `#!/bin/js` as the first line of a text file and make it executable with chmod.\r\n\r\nThe framework is designed from the ground up for writing command line scripts on Linux.  This video shows a command line Matrix screensaver written as a single /bin/js script in less that 100 lines of code.\r\n\r\nhttp://youtu.be/ilR6TeBfP8o\r\n\r\nAnd this is a star field screensaver in 50 lines of code.\r\n\r\nhttp://youtu.be/Ea0GtO18FSY\r\n\r\n# Documentation\r\n\r\nDocs generated from source are available \r\nhere http://code.abnoctus.com/binjs/CoverPage.html\r\n\r\nAPI docs are available here\r\nhttp://code.abnoctus.com/binjs/api/\r\nFull details of the parser rules are in the documentation under ParserRules.md.\r\n\r\nN.B. /bin/js is a Linux project, it might compile on a Mac or BSD or other versions of Unix, but it will not run on Windoze.\r\n"}